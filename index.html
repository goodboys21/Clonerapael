<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FileZone - Free File Uploader</title>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <style type="text/css">@font-face {font-family:Inter;font-style:normal;font-weight:300;src:url(/cf-fonts/v/inter/5.0.16/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:300;src:url(/cf-fonts/v/inter/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:300;src:url(/cf-fonts/v/inter/5.0.16/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:300;src:url(/cf-fonts/v/inter/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:300;src:url(/cf-fonts/v/inter/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:300;src:url(/cf-fonts/v/inter/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:300;src:url(/cf-fonts/v/inter/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:400;src:url(/cf-fonts/v/inter/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:400;src:url(/cf-fonts/v/inter/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:400;src:url(/cf-fonts/v/inter/5.0.16/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:400;src:url(/cf-fonts/v/inter/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:400;src:url(/cf-fonts/v/inter/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:400;src:url(/cf-fonts/v/inter/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:400;src:url(/cf-fonts/v/inter/5.0.16/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:500;src:url(/cf-fonts/v/inter/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:500;src:url(/cf-fonts/v/inter/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:500;src:url(/cf-fonts/v/inter/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:500;src:url(/cf-fonts/v/inter/5.0.16/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:500;src:url(/cf-fonts/v/inter/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:500;src:url(/cf-fonts/v/inter/5.0.16/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:500;src:url(/cf-fonts/v/inter/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:600;src:url(/cf-fonts/v/inter/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:600;src:url(/cf-fonts/v/inter/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:600;src:url(/cf-fonts/v/inter/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:600;src:url(/cf-fonts/v/inter/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:600;src:url(/cf-fonts/v/inter/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:600;src:url(/cf-fonts/v/inter/5.0.16/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:600;src:url(/cf-fonts/v/inter/5.0.16/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:700;src:url(/cf-fonts/v/inter/5.0.16/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:700;src:url(/cf-fonts/v/inter/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:700;src:url(/cf-fonts/v/inter/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:700;src:url(/cf-fonts/v/inter/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:700;src:url(/cf-fonts/v/inter/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:700;src:url(/cf-fonts/v/inter/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:700;src:url(/cf-fonts/v/inter/5.0.16/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}</style><link href="/style/output.css?v=8" rel="stylesheet">
</head>
<body class="bg-gradient-to-br from-space-900 to-space-700 font-sans min-h-screen flex flex-col text-white">
    <div id="particles-js"></div>
    <div id="stars-container"></div>

        <header class="relative z-10">
        <nav class="container mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <a href="/" class="text-3xl font-bold text-white hover:text-primary transition-colors duration-300">FileZone</a>
                <button id="mobileMenuToggle" class="md:hidden text-white focus:outline-none">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
                <ul id="navbarMenu" class="hidden md:flex space-x-6">
                    <li><a href="/" class="text-white hover:text-primary transition-colors duration-300">Home</a></li>
                    <li><a href="/about" class="text-white hover:text-primary transition-colors duration-300">About</a></li>
                    <li><a href="/contact" class="text-white hover:text-primary transition-colors duration-300">Contact</a></li>
                    <li><a href="/donate" class="text-white hover:text-primary transition-colors duration-300">Donate</a></li>
                    <li><a href="/api-docs" class="text-white hover:text-primary transition-colors duration-300">API Docs</a></li>
                </ul>
            </div>
        </nav>
        <div id="mobileMenu" class="md:hidden hidden">
            <div class="flex flex-col items-center bg-space-800 bg-opacity-95 w-full py-4">
                <a href="/" class="text-white hover:text-primary transition-colors duration-300 py-2">Home</a>
                <a href="/about" class="text-white hover:text-primary transition-colors duration-300 py-2">About</a>
                <a href="/contact" class="text-white hover:text-primary transition-colors duration-300 py-2">Contact</a>
                <a href="/donate" class="text-white hover:text-primary transition-colors duration-300 py-2">Donate</a>
                <a href="/api-docs" class="text-white hover:text-primary transition-colors duration-300 py-2">API Docs</a>
            </div>
        </div>
    </header>
    <div class="w-full bg-space-800/50 mt-4">
        <!-- views/partials/responsive-ad.ejs -->
<div class="w-full max-w-[728px] mx-auto px-4 sm:px-6 py-4">
  <div class="relative w-full" style="padding-bottom: 41.2%;"> <!-- 300/728 ≈ 41.2% -->
    <a 
      href="https://nevacloud.com/?ref=b3qsv2lxym" 
      target="_blank" 
      rel="noopener noreferrer" 
      class="absolute inset-0 group block"
    >
      <img 
        src="https://dnva.me/wide2" 
        alt="Nevacloud VPS Indonesia" 
        class="w-full h-full object-cover rounded-lg shadow-lg transition-all duration-300 group-hover:scale-[1.02]"
        width="728"
        height="300"
        loading="lazy"
      />
    </a>
  </div>
</div>

    </div>
    <main class="flex-grow container mx-auto px-4 py-8 relative z-10">
        <div class="max-w-2xl mx-auto glassmorphism rounded-2xl overflow-hidden shadow-2xl mb-8">
            <div class="p-8">
                <h2 class="text-3xl font-bold mb-6 text-white text-center">Free File Uploader</h2>
                <form id="uploadForm" class="space-y-6">
                    <div class="relative border-2 border-dashed border-space-200 rounded-lg p-6 transition-all duration-300 ease-in-out hover:border-primary">
                        <input required type="file" id="fileInput" name="file" class="absolute inset-0 w-full h-full opacity-0 z-50 cursor-pointer">
                        <div class="text-center">
                            <svg class="mx-auto h-12 w-12 text-space-200" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                            </svg>
                            <p class="mt-1 text-sm text-space-200">Drag and drop a file here, or click to select a file</p>
                        </div>
                    </div>
                    <div id="fileInfo" class="hidden">
                        <p class="text-sm text-space-200">Selected file: <span id="fileName" class="font-semibold"></span></p>
                        <p class="text-sm text-space-200">File size: <span id="fileSize" class="font-semibold"></span></p>
                    </div>
                    <div id="uploadProgress" class="hidden">
                        <div class="w-full bg-space-600 rounded-full h-2.5">
                            <div id="progressBar" class="bg-primary h-2.5 rounded-full transition-all duration-300 ease-in-out" style="width: 0%"></div>
                        </div>
                        <p class="text-sm text-space-200 mt-2">Upload progress: <span id="progressPercentage">0%</span></p>
                    </div>
                    <div class="flex justify-center">
                        <button type="submit" id="uploadButton" class="px-6 py-2 bg-primary text-white rounded-full hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50 transition-all duration-300 transform hover:scale-105 animate-pulse-slow">
                            Upload File
                        </button>
                    </div>
                </form>
                <div id="uploadResult" class="mt-8 hidden">
                    <h3 class="text-xl font-semibold mb-4 text-white">Upload Successful!</h3>
                    <div class="bg-space-700 bg-opacity-50 rounded-lg p-4">
                        <p class="text-sm text-space-200 mb-2">File name: <span id="resultFileName" class="font-semibold"></span></p>
                        <p class="text-sm text-space-200 mb-2">File size: <span id="resultFileSize" class="font-semibold"></span></p>
                        <p class="text-sm text-space-200 mb-2">Expires on: <span id="resultExpiry" class="font-semibold"></span></p>
                        <div class="mt-4">
                            <p class="text-sm text-space-200 mb-1">Download link:</p>
                            <a id="downloadLink" href="#" class="text-primary hover:text-primary/80 hover:underline break-all transition-colors duration-300" target="_blank"></a>
                        </div>
                        <div class="mt-4">
                            <p class="text-sm text-space-200 mb-1">Direct file link:</p>
                            <a id="directLink" href="#" class="text-primary hover:text-primary/80 hover:underline break-all transition-colors duration-300" target="_blank"></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="statsCard" class="max-w-2xl mx-auto glassmorphism rounded-2xl overflow-hidden shadow-2xl p-8">
            <h3 class="text-2xl font-bold mb-4 text-white text-center">File Statistics</h3>
            <div class="text-center">
                <p class="text-space-200 text-lg">Total Files: <span id="fileCount" class="font-semibold">0</span></p>
                <p class="text-space-200 text-lg">Total Size: <span id="totalSize" class="font-semibold">0 Bytes</span></p>
            </div>
        </div>
    </main>

    <div class="w-full bg-space-800/50 mb-4">
        <!-- views/partials/responsive-ad.ejs -->
<div class="w-full max-w-[728px] mx-auto px-4 sm:px-6 py-4">
  <div class="relative w-full" style="padding-bottom: 41.2%;"> <!-- 300/728 ≈ 41.2% -->
    <a 
      href="https://nevacloud.com/?ref=b3qsv2lxym" 
      target="_blank" 
      rel="noopener noreferrer" 
      class="absolute inset-0 group block"
    >
      <img 
        src="https://dnva.me/wide2" 
        alt="Nevacloud VPS Indonesia" 
        class="w-full h-full object-cover rounded-lg shadow-lg transition-all duration-300 group-hover:scale-[1.02]"
        width="728"
        height="300"
        loading="lazy"
      />
    </a>
  </div>
</div>

    </div>

    <footer class="relative z-10 bg-space-800 bg-opacity-30 text-white py-4 mt-8">
        <div class="container mx-auto px-4 text-center">
            <p>&copy; <span id="currentYear"></span> FileZone. All rights reserved.</p>
        </div>
    </footer>

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script type="module">
    import { CountUp } from 'https://cdn.jsdelivr.net/gh/inorganik/countUp.js@2.8.0/dist/countUp.min.js';
       document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('uploadForm');
    const fileInput = document.getElementById('fileInput');
    const fileInfo = document.getElementById('fileInfo');
    const fileName = document.getElementById('fileName');
    const fileSize = document.getElementById('fileSize');
    const uploadProgress = document.getElementById('uploadProgress');
    const progressBar = document.getElementById('progressBar');
    const progressPercentage = document.getElementById('progressPercentage');
    const uploadResult = document.getElementById('uploadResult');
    const resultFileName = document.getElementById('resultFileName');
    const resultFileSize = document.getElementById('resultFileSize');
    const resultExpiry = document.getElementById('resultExpiry');
    const downloadLink = document.getElementById('downloadLink');
    const directLink = document.getElementById('directLink');
    const uploadButton = document.getElementById('uploadButton');
    const fileCountElement = document.getElementById('fileCount');
    const totalSizeElement = document.getElementById('totalSize');
    const currentYearElement = document.getElementById('currentYear');
    const maxFileSize = 1000 * 1024 * 1024;
    let xhr;
    let isUploading = false;
    let haveCheck = false;

    // Toast configuration
    const showToast = (message, type = 'success') => {
        Toastify({
            text: message,
            duration: 3000,
            gravity: "top",
            position: "right",
            style: {
                background: type === 'success' ? "#4CAF50" : 
                           type === 'error' ? "#F44336" : 
                           type === 'warning' ? "#FFA000" : "#2196F3"
            }
        }).showToast();
    };

    currentYearElement.textContent = new Date().getFullYear();

    function updateStats() {
    fetch('https://filezone-api.caliph.dev/api/stats')
        .then(response => response.json())
        .then(data => {
            // Jika ini adalah pertama kali diperbarui, jalankan CountUp
            if (!haveCheck) {
                // Animate file count
                const fileCountAnim = new CountUp('fileCount', data.fileCount, { duration: 2 });
                if (!fileCountAnim.error) {
                    fileCountAnim.start();
                } else {
                    console.error(fileCountAnim.error);
                }

                // Animate total size
                const formattedSize = formatBytes(data.totalSize);
                const numericSize = parseFloat(data.totalSize); // Extract number for CountUp
                const totalSizeAnim = new CountUp('totalSize', numericSize, {
                    duration: 2,
                    formattingFn: () => formattedSize
                });
                if (!totalSizeAnim.error) {
                    totalSizeAnim.start();
                } else {
                    console.error(totalSizeAnim.error);
                }

                // Tandai bahwa statistik sudah dicek
                haveCheck = true;
            } else {
                // Jika sudah pernah dicek, langsung tampilkan nilai
                document.getElementById('fileCount').textContent = data.fileCount;
                document.getElementById('totalSize').textContent = formatBytes(data.totalSize);
            }
        })
        .catch(error => {
            console.error('Error fetching stats:', error);
            showToast('Failed to update statistics', 'error');
        });
}

    setInterval(updateStats, 5000);
    updateStats();

    fileInput.addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            fileName.textContent = file.name;
            fileSize.textContent = formatBytes(file.size);
            fileInfo.classList.remove('hidden');
            showToast('File selected: ' + file.name, 'info');
        } else {
            fileInfo.classList.add('hidden');
        }
    });

    form.addEventListener('submit', function(e) {
        e.preventDefault();
        const file = fileInput.files[0];
        if (file && file.size > maxFileSize) {
            showToast(`File size exceeds the maximum limit of 1000 MB`, 'error');
            return;
        }
        if (isUploading) {
            if (xhr) {
                xhr.abort();
                resetUploadUI();
                showToast('Upload cancelled', 'warning');
            }
            return;
        }
        const formData = new FormData(form);

        uploadProgress.classList.remove('hidden');
        progressBar.style.width = '0%';
        progressPercentage.textContent = '0%';
        uploadButton.textContent = 'Cancel Upload';
        uploadButton.classList.remove('bg-primary', "hover:bg-primary/90");
        uploadButton.classList.add('bg-red-600', 'hover:bg-red-700');
        isUploading = true;

        showToast('Upload started...', 'info');

        xhr = new XMLHttpRequest();
        xhr.open('POST', 'https://filezone-api.caliph.dev/upload', true);
        xhr.upload.onprogress = function(e) {
            if (e.lengthComputable) {
                const percentComplete = (e.loaded / e.total) * 100;
                progressBar.style.width = percentComplete + '%';
                progressPercentage.textContent = percentComplete.toFixed(2) + '%';
            }
        };
        xhr.onload = function() {
            if (xhr.status === 200) {
                const data = JSON.parse(xhr.responseText);
                if (data.status) {
                    resultFileName.textContent = data.result.originalname;
                    resultFileSize.textContent = data.result.filesize;
                    resultExpiry.textContent = data.result.expiredFmt;
                    downloadLink.href = data.result.url;
                    downloadLink.textContent = data.result.url;
                    directLink.href = data.result.url_file;
                    directLink.textContent = data.result.url_file;
                    uploadResult.classList.remove('hidden');
                    form.reset();
                    fileInfo.classList.add('hidden');
                    showToast('Upload completed successfully!', 'success');
                } else {
                    showToast('Upload failed: ' + data.message, 'error');
                }
            } else {
                showToast('Upload failed. Please try again.', 'error');
            }
            resetUploadUI();
        };
        xhr.onerror = function() {
            showToast('An error occurred during the upload.', 'error');
            resetUploadUI();
        };
        xhr.send(formData);
    });

    function resetUploadUI() {
        uploadProgress.classList.add('hidden');
        uploadButton.textContent = 'Upload File';
        uploadButton.classList.add('bg-primary', 'hover:bg-primary/90');
        uploadButton.classList.remove('bg-red-600', 'hover:bg-red-700');
        isUploading = false;
    }

    function formatBytes(bytes, decimals = 2) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const dm = decimals < 0 ? 0 : decimals;
        const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
    }

    // Mobile menu toggle
    const mobileMenuToggle = document.getElementById('mobileMenuToggle');
    const mobileMenu = document.getElementById('mobileMenu');

    mobileMenuToggle.addEventListener('click', function() {
        mobileMenu.classList.toggle('hidden');
    });

    // Create twinkling stars
    const starsContainer = document.getElementById('stars-container');
    for (let i = 0; i < 100; i++) {
        const star = document.createElement('div');
        star.classList.add('star', 'animate-twinkle');
        star.style.left = `${Math.random() * 100}%`;
        star.style.top = `${Math.random() * 100}%`;
        star.style.animationDelay = `${Math.random() * 4}s`;
        starsContainer.appendChild(star);
    }
});

// Particles.js configuration
particlesJS('particles-js', {
    particles: {
        number: { value: 160, density: { enable: true, value_area: 800 } },
        color: { value: "#ffffff" },
        shape: { type: "circle", stroke: { width: 0, color: "#000000" }, polygon: { nb_sides: 5 }, },
        opacity: { value: 1, random: true, anim: { enable: true, speed: 1, opacity_min: 0, sync: false } },
        size: { value: 3, random: true, anim: { enable: false, speed: 4, size_min: 0.3, sync: false } },
        line_linked: { enable: false, distance: 150, color: "#ffffff", opacity: 0.4, width: 1 },
        move: { enable: true, speed: 1, direction: "none", random: true, straight: false, out_mode: "out", bounce: false, attract: { enable: false, rotateX: 600, rotateY: 600 } }
    },
    interactivity: {
        detect_on: "canvas",
        events: { onhover: { enable: true, mode: "bubble" }, onclick: { enable: true, mode: "repulse" }, resize: true },
        modes: {
            grab: { distance: 400, line_linked: { opacity: 1 } },
            bubble: { distance: 250, size: 0, duration: 2, opacity: 0, speed: 3 },
            repulse: { distance: 400, duration: 0.4 },
            push: { particles_nb: 4 },
            remove: { particles_nb: 2 }
        }
    },
    retina_detect: true
});
    </script>
</body>
</html>
